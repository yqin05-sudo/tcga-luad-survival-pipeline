# ============================================================
# Auto-generate README.md  (Full Pipeline Documentation)
# ============================================================

readme_path <- "README.md"

cat("
# ðŸ§¬ TCGA-LUAD Survival Analysis Pipeline

A complete, reproducible pipeline for:
- Cancer bioinformatics research  
- Clinical collaboration  
- AI/ML oncology survival model development  
- Educational and training use  

---

## ðŸ“‚ 2. Project Structure

\`\`\`
tcga-luad-survival-pipeline/
â”œâ”€â”€ data_raw/                 # Raw GDC JSON / TSV
â”œâ”€â”€ data_clean/               # Final cleaned dataset
â”‚   â”œâ”€â”€ luad.data.rds
â”‚   â””â”€â”€ variable_dictionary.md
â”œâ”€â”€ code/                     # All pipeline scripts
â”‚   â”œâ”€â”€ 01_download.R
â”‚   â”œâ”€â”€ 02_cleaning.R
â”‚   â”œâ”€â”€ 03_variable_mapping.R
â”‚   â”œâ”€â”€ 04_survival_table.R
â”‚   â”œâ”€â”€ 05_cox_model.R
â”‚   â”œâ”€â”€ 06_generate_figures.R
â”‚   â”œâ”€â”€ 07_export_results.R
â”‚   â””â”€â”€ 08_generate_readme.R  # â† This script
â”œâ”€â”€ results/
â”‚   â”œâ”€â”€ km_plots/             # KM curve images
â”‚   â”œâ”€â”€ forest_plots/         # Cox forest plot images
â”‚   â””â”€â”€ model_summary/        # RDS + summary text
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ pipeline.md           # Full methods & workflow
â””â”€â”€ README.md                 # You are here
\`\`\`

---

## ðŸ“Š 3. Key Results

### **Kaplanâ€“Meier Survival (Stage Groups)**  
Generated by: `code/06_generate_figures.R`

![KM Plot](results/km_plots/stage_km.png)

### **Multivariable Cox Hazard Ratios**

![Cox Forest](results/forest_plots/cox_forest.png)

---

## ðŸ§ª 4. Model Summary  
Saved in: `results/model_summary/`

- `cox_model.rds`  
- `cox_summary.txt`  
- Number of patients: **487**  
- Number of events: **171**  

---

## ðŸš€ 5. Quick Start

Install required R packages:

\`\`\r
install.packages(c(\"survival\", \"survminer\", \"tidyverse\"))
\`\`\r

Run figure generation:

\`\`\r
source(\"code/06_generate_figures.R\")
source(\"code/07_export_results.R\")
\`\`\r

---

## ðŸ”· 6. Documentation

Full detailed workflow located in:

ðŸ“„ **docs/pipeline.md**

Includes:
- Data sources  
- Variable definitions  
- Cleaning rules  
- Model formulas  
- Figure generation settings  

---

## ðŸ”’ 7. Data Source & Compliance

This project uses open-access **TCGA-LUAD** data from the  
**NCI Genomic Data Commons (GDC)**.

- No PHI included  
- All case identifiers are anonymized UUIDs  
- Follows GDC open-access policies  
- For research & education only  

---

## ðŸ“š 8. Citation

If using this pipeline, please cite:

- The Cancer Genome Atlas (TCGA)
- NCI Genomic Data Commons (GDC)

---

## âœ‰ï¸ 9. Contact

For questions or collaborations:

**Yunlong Qin, PhD**  
ðŸ“§ bangong24@outlook.com  
ðŸ“§ yqin05@gmail.com  

---
", file = readme_path)
